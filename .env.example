# ======================================================
# Payram Updater - Local Development Environment
# ======================================================
# NOTE:
# - This file is intended for LOCAL TESTING ONLY.
# - Production deployments should use /etc/payram/updater.env
# - Environment variables always override values in this file.
# ======================================================

# ------------------------------------------------------
# Server
# ------------------------------------------------------

# Localhost port for payram-updater HTTP API
UPDATER_PORT=2359


# ------------------------------------------------------
# Upgrade Policy (GitHub - required for dashboard mode)
# ------------------------------------------------------

# GitHub raw URL for upgrade policy
POLICY_URL=https://raw.githubusercontent.com/PayRam/payram-policies/main/upgrade-policy.json


# ------------------------------------------------------
# Runtime Manifest
# ------------------------------------------------------

# Phase 1:
# - Can be a local file path OR an HTTPS URL
# - Local file is recommended for development
RUNTIME_MANIFEST_URL=./runtime-manifest.json


# ------------------------------------------------------
# Fetch & Runtime Limits
# ------------------------------------------------------

# Timeout (seconds) for fetching policy / manifest
FETCH_TIMEOUT_SECONDS=10


# ------------------------------------------------------
# Payram Runtime Configuration (required)
# ------------------------------------------------------

# Path to Payram's runtime config file
# This file is created by the Payram installer and contains essential runtime settings.
# No default path is assumed - this variable must be explicitly set.


# ------------------------------------------------------
# Local State (host filesystem)
# ------------------------------------------------------

# Directory where updater stores job state (status.json)
STATE_DIR=./.payram-updater/state

# ------------------------------------------------------
# Phase 2.1: Execution Configuration
# ------------------------------------------------------

# Target container name to upgrade
TARGET_CONTAINER_NAME=payram

# Base URL for payram-core health checks
CORE_BASE_URL=http://127.0.0.1:8080

# Execution mode: 'dry-run' (default, no actual changes) or 'execute' (perform upgrade)
EXECUTION_MODE=dry-run

# Path to docker binary
DOCKER_BIN=docker


# ------------------------------------------------------
# Phase 4: Database Backup Configuration
# ------------------------------------------------------

# Backups are always enabled and automatically created before upgrades
# Directory where backups are stored (relative or absolute path)
# Production: /var/lib/payram/backups
BACKUP_DIR=data/backups

# Number of backups to retain (older backups are pruned)
BACKUP_RETENTION=10

# PostgreSQL connection settings for pg_dump/pg_restore
PG_HOST=127.0.0.1
PG_PORT=5432
PG_DB=payram
PG_USER=payram
PG_PASSWORD=payram123
